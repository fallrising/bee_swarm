# Bee Swarm 官方快速開始指南

## 🎯 基於 Google 官方 Gemini CLI

本指南基於 [Google 官方 Gemini CLI](https://github.com/google-gemini/gemini-cli)（⭐ 63.5k stars，🍴 6k forks），提供 Bee Swarm 混合架構的快速部署方案。

## 📚 官方資源

- **官方倉庫**：https://github.com/google-gemini/gemini-cli
- **完整文檔**：https://github.com/google-gemini/gemini-cli/blob/main/docs/
- **配置說明**：https://github.com/google-gemini/gemini-cli/blob/main/docs/cli/configuration.md

## 🚀 快速安裝（5 分鐘）

### 1. 安裝 Google Gemini CLI

```bash
# 官方安裝方式
npm install -g @google/gemini-cli

# 驗證安裝
gemini --version
```

### 2. 獲取 Gemini API Key

1. 前往 [Google AI Studio](https://makersuite.google.com/app/apikey)
2. 創建新的 API key
3. 配置環境變數：

```bash
export GEMINI_API_KEY="your-api-key-here"
```

### 3. 測試基本功能

```bash
# 測試連接
gemini --prompt "Hello, Gemini!" --model gemini-1.5-flash

# 測試沙盒模式
gemini --prompt "列出當前目錄文件" --sandbox --yolo
```

## 🏗️ Bee Swarm 專案設置

### 1. 克隆專案

```bash
git clone [your-bee-swarm-repo]
cd bee_swarm
```

### 2. 設置 GitHub Secrets

在 GitHub 倉庫設置中添加：
- `GEMINI_API_KEY`：你的 Gemini API Key
- `GITHUB_TOKEN`：GitHub Actions token（通常自動提供）

### 3. 測試 Product Manager 角色

```bash
# 進入 PM 角色目錄
cd roles/product_manager

# 測試角色配置
gemini --all_files --prompt "分析這個角色的職責" --sandbox --yolo
```

## 🎯 第一個 AI Agent 任務

### 1. 創建測試 Epic Issue

在 GitHub 倉庫中創建一個新 Issue：
- 標題：`[Epic] 測試 AI 協作系統`
- 標籤：添加 `epic` 標籤
- 內容：
```markdown
## Epic 描述
測試 Bee Swarm AI 協作系統的基本功能

## 需求
- 驗證 AI Agent 能否正確分析 Epic
- 測試子任務創建功能
- 確認角色分配機制

## 驗收標準
- [ ] AI 能正確理解 Epic 內容
- [ ] 能創建相應的子任務
- [ ] 能分配給適當的角色
```

### 2. 觸發 AI Agent

Issue 創建後，GitHub Actions 會自動觸發 Product Manager AI Agent：

1. **自動觸發**：`epic` 標籤觸發工作流程
2. **AI 分析**：使用 Gemini CLI 分析 Epic 內容
3. **創建子任務**：自動創建開發任務
4. **角色分配**：添加適當的角色標籤

### 3. 查看執行結果

1. **GitHub Actions**：查看執行日誌
2. **新建 Issues**：檢查自動創建的子任務
3. **Issue Comments**：查看 AI 的分析報告

## 📊 驗證成功指標

### ✅ 技術指標
- [ ] Gemini CLI 成功安裝和執行
- [ ] GitHub Actions 工作流程正常觸發
- [ ] 沙盒模式安全執行
- [ ] API 調用成功並返回結果

### ✅ 業務指標  
- [ ] AI 正確理解 Epic 內容
- [ ] 創建的子任務邏輯合理
- [ ] 角色分配準確
- [ ] PRD 文檔質量良好

## 🔧 故障排除

### 常見問題

#### 1. API Key 認證失敗
```bash
# 檢查 API Key 設置
echo $GEMINI_API_KEY

# 測試 API 連接
gemini --prompt "test" --model gemini-1.5-flash
```

#### 2. GitHub Actions 權限問題
- 確認 `GITHUB_TOKEN` 有足夠權限
- 檢查 Actions 是否啟用
- 驗證 Secrets 配置

#### 3. 沙盒執行失敗
```bash
# 檢查 Docker 是否安裝
docker --version

# 測試沙盒模式
gemini --sandbox --prompt "echo hello" --yolo
```

### 除錯命令

```bash
# 啟用詳細日誌
gemini --debug_mode --prompt "測試任務" --sandbox

# 查看記憶狀態
gemini
/memory show
/memory refresh
```

## 📈 進階配置

### 1. 自定義沙盒環境

```dockerfile
# roles/product_manager/.gemini/sandbox.Dockerfile
FROM gemini-cli-sandbox

# 安裝項目特定依賴
RUN apt-get update && apt-get install -y \
    git \
    gh \
    jq \
    curl

# 配置 GitHub CLI
ENV GH_TOKEN=$GITHUB_TOKEN
```

### 2. 角色專屬配置

```json
// roles/product_manager/.gemini/settings.json
{
  "contextFileName": "GEMINI.md",
  "coreTools": [
    "read_file",
    "write_file", 
    "read_many_files",
    "run_shell_command",
    "web_fetch"
  ],
  "fileFiltering": {
    "respectGitIgnore": true,
    "enableRecursiveFileSearch": true
  },
  "usageStatisticsEnabled": false
}
```

### 3. 成本優化設置

```bash
# 開發環境：使用 Flash 模型
gemini --model gemini-1.5-flash --prompt "開發任務"

# 生產環境：重要任務使用 Pro 模型
gemini --model gemini-1.5-pro-latest --prompt "重要分析" --checkpointing
```

## 🚀 擴展到其他角色

### 1. Backend Developer

```bash
# 複製配置
cp -r roles/product_manager/.gemini roles/backend_developer/

# 修改角色專屬配置
# 編輯 roles/backend_developer/.gemini/GEMINI.md
```

### 2. Frontend Developer

```bash
# 複製並修改工作流程
cp .github/workflows/product-manager.yml .github/workflows/frontend-developer.yml

# 更新觸發條件和執行邏輯
```

### 3. DevOps Engineer

```bash
# 添加部署和監控工具
echo '"monitoring_tools": ["read_file", "run_shell_command"]' >> roles/devops_engineer/.gemini/settings.json
```

## 📋 下一步計劃

### 第一週：基礎驗證
- [ ] 完成 Gemini CLI 安裝和配置
- [ ] 測試 Product Manager Agent
- [ ] 驗證基本工作流程

### 第二週：多角色部署
- [ ] 部署 Backend Developer Agent
- [ ] 部署 Frontend Developer Agent  
- [ ] 部署 DevOps Engineer Agent

### 第三週：優化改進
- [ ] 成本優化和監控
- [ ] 錯誤處理和降級機制
- [ ] 性能調優和文檔完善

## 🎯 成功里程碑

### 🎉 里程碑 1：基礎可用
- 至少一個 AI Agent 成功執行任務
- GitHub Actions 工作流程穩定運行
- 成本控制在預算範圍內

### 🎉 里程碑 2：多角色協作
- 多個 AI Agent 協同工作
- 任務自動分配和執行
- 混合架構發揮效果

### 🎉 里程碑 3：生產就緒
- 完整的監控和告警系統
- 穩定的錯誤處理機制
- 可擴展的架構設計

---

## 🌟 核心優勢總結

✅ **官方支援**：基於 Google 官方 Gemini CLI（63.5k stars）  
✅ **企業級穩定**：成熟的開源工具鏈，長期維護保證  
✅ **成本優化**：比純容器方案節省 45-85% 成本  
✅ **快速部署**：4 週內完整實施  
✅ **安全可靠**：沙盒執行，生產級安全標準  
✅ **完全自動**：無人值守的智能協作系統  

**立即開始你的 AI 協作之旅！** 🚀

---

*本指南基於 [Google 官方 Gemini CLI](https://github.com/google-gemini/gemini-cli) 制作，確保最佳的技術實踐和長期可維護性。* 